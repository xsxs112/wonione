<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layout/default">
	
	<th:block layout:fragment="customTitle">
		<title>수강 후기 작성</title> 
	</th:block>
	
	<th:block layout:fragment="customContent">
	
		<h2>수강 후기 작성</h2>
	<form action="/addReview" class="container-fluid" method="post" id="reviewForm">
	<!-- 글번호 자동생성, 세션 아이디 받기 히든타입
	<input type="hidden" th:value="${boardNum}" name="boardNum">
	<input type="hidden" class="form-control" name="boardWriterId" th:value="${sessionId}">
	-->
		<table class="table table-striped">
			<tr class="info">
				<th colspan="3">후기 번호</th>
				<td colspan="3">
					<input type="text" class="form-control" th:value="${reviewNum}" name="reviewNum" readonly="readonly">
				</td>
			</tr>
			<tr class="info">
				<th colspan="3">작성자 ID</th>
				<td colspan="3">
					<input type="text" class="form-control" th:value="${session.SID}" name="reviewWriterId" readonly="readonly">
				</td>
			</tr>
			<tr class="info">
				 <th colspan="3">평점</th>
				<td colspan="3">
					0<input type="radio" name="reviewGrade" id="reviewGrade" value="0">
					1<input type="radio" name="reviewGrade" id="reviewGrade" value="1">
					2<input type="radio" name="reviewGrade" id="reviewGrade" value="2">
					3<input type="radio" name="reviewGrade" id="reviewGrade" value="3">
					4<input type="radio" name="reviewGrade" id="reviewGrade" value="4">
					5<input type="radio" name="reviewGrade" id="reviewGrade" value="5">				
					<!-- 소수는 입력할 수 없는 문제점 미해결
					0.5<input type="radio" name="reviewGrade" id="reviewGrade" value="0.5">
					1.5<input type="radio" name="reviewGrade" id="reviewGrade" value="1.5">
					2.5<input type="radio" name="reviewGrade" id="reviewGrade" value="2.5">
					3.5<input type="radio" name="reviewGrade" id="reviewGrade" value="3.5">
					4.5<input type="radio" name="reviewGrade" id="reviewGrade" value="4.5">
					 -->
				</td>
			</tr>
			<tr class="info">	
				<th colspan="6">내용</th>
			</tr>
			<tr class="info">
				<td colspan="6">
					<textarea class="form-control" rows="5" name="reviewComment" id="reviewComment"></textarea>
				</td>
			</tr>
		</table>
		<div style="margin-bottom:10px">
			<button type="button" class="btn btn-default btn-success" id="btnSubmit">등록</button>
			<a href="/getReview" class="btn btn-default btn-info">취소</a>
		</div>
	</form>
	
	<!-- 유효성 검사 start -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>	
	<script type="text/javascript">
	$(function(){
		$('#btnSubmit').click(function(){
			var reviewForm = $('#reviewForm');
			var reviewGrade = $('#reviewGrade:checked').length;
			var reviewComment = $('#reviewComment');
			console.log(reviewGrade + '<--reviewGrade');
			console.log(reviewComment + '<--reviewComment');
			
			if(reviewGrade == 0){
				alert('평점을 선택해주세요.');
				$('.reviewGrade').eq(0).focus();
				return;
			}else if(reviewComment.val() == ''){
				alert('내용을 입력해주세요.');
				reviewComment.focus();
				return;
			}
			reviewForm.submit();
		});
	});
	</script>
	<!-- 유효성 검사 end -->
	
	</th:block>
		
	<th:block layout:fragment="customJsScript">    
	</th:block>
	
</html>
