<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layout/defaultLogin">
	
	<th:block layout:fragment="customTitle">
		<title>Won I One</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script type="text/javascript">
			$(function(){
				$('#loginBtn').click(function(){
					
					console.log('클릭 이벤트 걸리는지 확인');
					
					var mrId = $('input[name=mrId]').val();
					var mrPw = $('input[name=mrPw]').val();
					
					console.log(mrId,'로그인 화면에 입력하는 mrId');
					console.log(mrPw,'로그인 화면에 입력하는 mrPw');
					
					if(mrId === '' || mrId === undefined){
						alert('아이디를 입력해 주세요');
						mrId.focus();
						return ;
					}else if(mrPw === '' || mrPw === undefined){
						alert('비밀번호를 입력해 주세요');
						mrPw.focus();
						return ;
					}else{
						var request = $.ajax({
							  url: "/getMemberInfo",
							  method:"get",
							  data: { mrId : mrId, mrPw : mrPw},
							  dataType: "text"
						});
						request.done(function(data){
							console.log(data,'data');
							if(data != undefined && data != ''){
								$('form').submit();
							}else{
								alert("입력한 정보가 일치하지 않습니다.");
							}
						});
						request.fail(function(jqXHR, textStatus){
							alert("Request failed: " + textStatus);
						});
					}
				});
			});
			
		</script>
	</th:block>
	
	<th:block layout:fragment="customContent">
			<body class='login'>
	    <div class='wrapper'>
	      <div class='row'>
	        <div class='col-lg-12'>
	          <div class='brand text-center'>
	            <h1>
	              <div class='logo-icon'>
	                <img src="img/won i one logo45.jpg"></img>
	              </div>
	              Won I One
	            </h1>
	          </div>
	        </div>
	      </div>
		<div class='row'>
		<div class='col-lg-12'>
			<form action="/login" th:if="${session.SID eq null}" method="post">
				<fieldset class='text-center'>
					<legend>Login</legend>
				<div class='form-group'>
					<input class='form-control' placeholder='아이디를 입력해주세요' type='text'name="mrId">
				</div>
				<div class='form-group'>
					<input class='form-control' placeholder='비밀번호를 입력해주세요' type='password' name="mrPw">
				</div>
				<div class='text-center'>
					<button type="button" id="loginBtn" class="btn btn-default">로그인</button>
				</div>
				</fieldset>
			</form>
			<h3 th:if="${session.SID ne null}"><span th:text="${session.SNAME + '님 환영합니다.'}"></span></h3>
			<button type="button" th:if="${session.SID ne null}" onclick= "location.href='/getWIOMemberList'">
				HOME
			</button>
		</div>
		</div>
		</div>
	</th:block>
<!-- 	
	<th:block layout:fragment="customJs">
	
	</th:block>
 -->
</html>